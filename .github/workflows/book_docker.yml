name: deploy-book

# Only run this when the master branch changes
on:
  workflow_dispatch:
  pull_request:

# This job installs dependencies, build the book, and pushes it to `gh-pages`
jobs:
  deploy-book:
    runs-on: ubuntu-latest
    container: dkorzhov/actions-poetry@1.0
    steps:
      - uses: actions/checkout@v2
      
      - uses: actions/checkout@v2
        with:
          ref: 'gh-pages'
          path: ./gh-pages        
      - name: Copy cache dir
        run: |
          cp -r ./gh-pages/_build/ ./qmlcourseRU/ || exit 0

      # # Build the book
      # - name: Build the book
      #   run: |
      #     poetry run jupyter-book build ./qmlcourseRU
      # # Push the book's HTML to github-pages
      # - name: GitHub Pages action
      #   uses: peaceiris/actions-gh-pages@v3.8.0
      #   with:
      #     github_token: ${{ secrets.GITHUB_TOKEN }}
      #     publish_dir: ./qmlcourseRU
